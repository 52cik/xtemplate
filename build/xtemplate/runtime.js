define("xtemplate/runtime",[],function(n,t,r){var e,i,o,a,f;e=function(n){function t(){var n="";for(var t in e)n+=t+"|";return n=n.slice(0,-1),o=new RegExp(n,"g")}var r,e={"&":"&amp;",">":"&gt;","<":"&lt;","`":"&#x60;","/":"&#x2F;",'"':"&quot;","'":"&#x27;"},i=/[&<>"'`]/,o=t(),a=/\\?\{([^{}]+)\}/g,f="undefined"!=typeof global?global:window,s=Object.prototype.toString;return n=r={isArray:Array.isArray||function(n){return"[object Array]"===s.call(n)},keys:Object.keys||function(n){var t,r=[];for(t in n)n.hasOwnProperty(t)&&r.push(t);return r},each:function(n,t,e){if(n){var i,o,a,f=0,s=n&&n.length,u=void 0===s||"[object Function]"===Object.prototype.toString.call(n);if(e=e||null,u)for(a=r.keys(n);f<a.length&&(i=a[f],t.call(e,n[i],i,n)!==!1);f++);else for(o=n[0];s>f&&t.call(e,o,f,n)!==!1;o=n[++f]);}return n},mix:function(n,t){for(var r in t)n[r]=t[r];return n},globalEval:function(n){f.execScript?f.execScript(n):!function(n){f.eval.call(f,n)}(n)},substitute:function(n,t,r){return"string"==typeof n&&t?n.replace(r||a,function(n,r){return"\\"===n.charAt(0)?n.slice(1):void 0===t[r]?"":t[r]}):n},escapeHtml:function(n){return n=""+n,i.test(n)?(n+"").replace(o,function(n){return e[n]}):n},merge:function(){for(var n=0,t=arguments.length,e={};t>n;n++){var i=arguments[n];i&&r.mix(e,i)}return e}}}(),i=function(n){function t(n,t,r){this.data=void 0!==n?n:{},r?(this.parent=r,this.root=r.root):(this.parent=void 0,this.root=this),this.affix=t||{},this.ready=!1}return t.prototype={isScope:1,constructor:t,setParent:function(n){this.parent=n,this.root=n.root},set:function(n,t){this.affix[n]=t},setData:function(n){this.data=n},getData:function(){return this.data},mix:function(n){var t=this.affix;for(var r in n)t[r]=n[r]},get:function(n){var t,r=this.data,e=this.affix;return null!=r&&(t=r[n]),void 0!==t?t:e[n]},resolveInternalOuter:function(n){var t,r=n[0],e=this,i=e;if("this"===r)t=e.data;else if("root"===r)i=i.root,t=i.data;else{if(!r)return[i.data];do t=i.get(r);while(void 0===t&&(i=i.parent))}return[void 0,t]},resolveInternal:function(n){var t=this.resolveInternalOuter(n);if(1===t.length)return t[0];var r,e=n.length,i=t[1];if(void 0===i)return void 0;for(r=1;e>r;r++)i=i[n[r]];return i},resolveLooseInternal:function(n){var t=this.resolveInternalOuter(n);if(1===t.length)return t[0];var r,e=n.length,i=t[1];for(r=1;null!=i&&e>r;r++)i=i[n[r]];return i},resolveUp:function(n){return this.parent&&this.parent.resolveInternal(n)},resolveLooseUp:function(n){return this.parent&&this.parent.resolveLooseInternal(n)},resolveOuter:function(n,t){var r,e=this,i=e;if(!t&&1===n.length){if(r=e.get(n[0]),void 0!==r)return[r];t=1}if(t)for(;i&&t--;)i=i.parent;return i?[void 0,i]:[void 0]},resolveLoose:function(n,t){var r=this.resolveOuter(n,t);return 1===r.length?r[0]:r[1].resolveLooseInternal(n)},resolve:function(n,t){var r=this.resolveOuter(n,t);return 1===r.length?r[0]:r[1].resolveInternal(n)}},n=t}(),o=function(n){function t(n,t,r){this.list=n,this.init(),this.next=t,this.ready=!1,this.tpl=r}function r(n,r){var e=this;e.config=r,e.head=new t(e,void 0),e.callback=n,this.init()}var i=e;return t.prototype={constructor:t,isBuffer:1,init:function(){this.data=""},append:function(n){return this.data+=n,this},write:function(n){if(null!=n){if(n.isBuffer)return n;this.data+=n}return this},writeEscaped:function(n){if(null!=n){if(n.isBuffer)return n;this.data+=i.escapeHtml(n)}return this},insert:function(){var n=this,r=n.list,e=n.tpl,i=new t(r,n.next,e),o=new t(r,i,e);return n.next=o,n.ready=!0,o},async:function(n){var t=this.insert(),r=t.next;return n(t),r},error:function(n){var t=this.list.callback;if(t){var r=this.tpl;if(r){n instanceof Error||(n=new Error(n));var e=r.name,i=r.pos.line,o="XTemplate error in file: "+e+" at line "+i+": ";n.stack=o+n.stack,n.message=o+n.message,n.xtpl={pos:{line:i},name:e}}this.list.callback=null,t(n,void 0)}},end:function(){var n=this;return n.list.callback&&(n.ready=!0,n.list.flush()),n}},r.prototype={constructor:r,init:function(){this.data=""},append:function(n){this.data+=n},end:function(){this.callback(null,this.data),this.callback=null},flush:function(){for(var n=this,t=n.head;t;){if(!t.ready)return n.head=t,void 0;this.data+=t.data,t=t.next}n.end()}},r.Buffer=t,n=r}(),a=function(n){var t=i,r=e,o={range:function(n,t){var r=t.params,e=r[0],i=r[1],o=r[2];o?(e>i&&o>0||i>e&&0>o)&&(o=-o):o=e>i?-1:1;for(var a=[],f=e;i>e?i>f:f>i;f+=o)a.push(f);return a},foreach:function(n,r,e){var i,o,a,f,s=r.params,u=s[0],l=s[2]||"xindex",c=s[1];if(u)for(i=u.length,f=0;i>f;f++)o=new t(u[f],{xcount:i,xindex:f},n),a=o.affix,"xindex"!==l&&(a[l]=f,a.xindex=void 0),c&&(a[c]=u[f]),e=r.fn(o,e);return e},forin:function(n,r,e){var i,o,a,f=r.params,s=f[0],u=f[2]||"xindex",l=f[1];if(s)for(a in s)i=new t(s[a],{xindex:a},n),o=i.affix,"xindex"!==u&&(o[u]=a,o.xindex=void 0),l&&(o[l]=s[a]),e=r.fn(i,e);return e},each:function(n,t,e){var i=t.params,a=i[0];return a?r.isArray(a)?o.foreach(n,t,e):o.forin(n,t,e):e},"with":function(n,r,e){var i=r.params,o=i[0];if(o){var a=new t(o,void 0,n);e=r.fn(a,e)}return e},"if":function(n,t,r){var e=t.params,i=e[0];if(i){var o=t.fn;o&&(r=o(n,r))}else{var a=!1,f=t.elseIfs,s=t.inverse;if(f)for(var u=0,l=f.length;l>u;u++){var c=f[u];if(a=c.test(n)){r=c.fn(n,r);break}}!a&&s&&(r=s(n,r))}return r},set:function(n,t,r){return n.mix(t.hash),r},include:1,parse:1,extend:1,block:function(n,t,r){var e,i=this,o=i.runtime,a=t.params,f=a[0];2===a.length&&(e=a[0],f=a[1]);var s,u=o.blocks=o.blocks||{},l=u[f],c={fn:t.fn,type:e};if(l){if(l.type)if("append"===l.type)c.next=l,u[f]=c;else if("prepend"===l.type){var v;for(s=l;s&&"prepend"===s.type;)v=s,s=s.next;c.next=s,v.next=c}}else u[f]=c;if(!o.extendTpl)for(s=u[f];s;)s.fn&&(r=s.fn.call(i,n,r)),s=s.next;return r},macro:function(n,r,e){var i=r.hash,o=r.params,a=o[0],f=o.slice(1),s=this,u=s.runtime,l=u.macros=u.macros||{},c=l[a];if(r.fn)l[a]={paramNames:f,hash:i,fn:r.fn};else if(c){var v,d=c.hash||{};if(v=c.paramNames)for(var h=0,p=v.length;p>h;h++){var m=v[h];d[m]=f[h]}if(i)for(var x in i)d[x]=i[x];var g=new t(d);g.root=n.root,e=c.fn.call(s,g,e)}else{var y="can not find macro: "+a;e.error(y)}return e}};return o["debugger"]=function(){},n=o}(),f=function(n){function t(n,t,r,e,i,o,a,f){this.name=n,this.originalName=o||n,this.runtime=t,this.root=r,this.pos={line:1},this.scope=e,this.buffer=i,this.fn=a,this.parent=f}function r(n,t,r){var e=r[0],i=n&&n[e]||t&&t[e]||x[e];if(1===r.length)return i;if(i)for(var o=r.length,a=1;o>a;a++)if(i=i[r[a]],!i)return!1;return i}function f(n,t){var r=n.split("/"),e=t.split("/");r.pop();for(var i=0,o=e.length;o>i;i++){var a=e[i];"."===a||(".."===a?r.pop():r.push(a))}return r.join("/")}function s(n,t,e,i,o,a){var f,s,u;return a||(u=r(n.runtime.commands,n.root.config.commands,o)),u?u.call(n,t,e,i):u!==!1&&(f=t.resolve(o.slice(0,-1),a),s=f[o[o.length-1]])?s.apply(f,e.params):(i.error("Command Not Found: "+o.join(".")),i)}function u(n,t){var r=this;r.fn=n,r.config=p.merge(u.globalConfig,t),this.subNameResolveCache={}}function l(n,t,r){if("."!==t.charAt(0))return t;var e=r+"_ks_"+t,i=n.subNameResolveCache,o=i[e];return o?o:t=i[e]=f(r,t)}function c(n,t,r,e,i,o){var a=l(n,o,i.name),f=e.insert(),s=f.next;return d(n,a,i.runtime,t,f,o,r,e.tpl),s}function v(n,r,e,i,o){var a=e.insert(),f=a.next,s=new t(o.TPL_NAME,i.runtime,n,r,a,void 0,o,e.tpl);return a.tpl=s,h(s),f}function d(n,r,e,i,o,a,f,s){var u=new t(r,e,n,i,o,a,void 0,s);o.tpl=u,n.config.loader.load(u,function(n,t){"function"==typeof t?(u.fn=t,h(u)):n?o.error(n):(t=t||"",f?o.writeEscaped(t):o.data+=t,o.end())})}function h(n){var t=n.fn();if(t){var r,e=n.runtime,i=e.extendTpl;if(i&&(r=i.params[0],!r))return t.error("extend command required a non-empty parameter");var o=e.extendTplFn,a=e.extendTplBuffer;return o?(e.extendTpl=null,e.extendTplBuffer=null,e.extendTplFn=null,v(n.root,n.scope,a,n,o).end()):r&&(e.extendTpl=null,e.extendTplBuffer=null,c(n.root,n.scope,0,a,n,r).end()),t.end()}}var p=e,m=a,x={},g=i,y=o,b={callFn:s,callCommand:function(n,t,r,e,i){return s(n,t,r,e,i)}};return p.mix(u,{config:function(n,t){var r=this.globalConfig=this.globalConfig||{};return arguments.length?(void 0!==t?r[n]=t:p.mix(r,n),void 0):r},version:"3.7.1",nativeCommands:m,utils:b,util:p,addCommand:function(n,t){x[n]=t},removeCommand:function(n){delete x[n]}}),u.prototype={constructor:u,Scope:g,nativeCommands:m,utils:b,removeCommand:function(n){var t=this.config;t.commands&&delete t.commands[n]},addCommand:function(n,t){var r=this.config;r.commands=r.commands||{},r.commands[n]=t},include:function(n,t,r,e){var i,o=t.params;i=n;var a=t.hash,f=t&&t.escape;return a&&(i=new g(a,void 0,n)),r=c(this,i,f,r,e,o[0])},includeModule:function(n,t,r,e){var i,o=t.params;i=n;var a=t.hash;return a&&(i=new g(a,void 0,n)),r=v(this,i,r,e,o[0])},render:function(n,r,e){var i="",o=this,a=o.fn,f=o.config;"function"==typeof r&&(e=r,r=null),r=r||{},e=e||function(n,t){if(n)throw n instanceof Error||(n=new Error(n)),n;i=t};var s=o.config.name;!s&&a&&a.TPL_NAME&&(s=a.TPL_NAME);var l;l=n instanceof g?n:new g(n);var c=new u.LinkedBuffer(e,f).head,v=new t(s,{commands:r.commands},o,l,c,s,a);return c.tpl=v,a?(h(v),i):(f.loader.load(v,function(n,t){t?(v.fn=o.fn=t,h(v)):n&&c.error(n)}),i)}},u.Scope=g,u.LinkedBuffer=y,n=u}(),r.exports=f});