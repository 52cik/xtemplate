KISSY.add("xtemplate/runtime",[],function(n,t,e,r){var a,i,o,f,c;a=function(n){function t(){var n="";for(var t in r)n+=t+"|";return n=n.slice(0,-1),i=new RegExp(n,"g")}var e,r={"&":"&amp;",">":"&gt;","<":"&lt;","`":"&#x60;","/":"&#x2F;",'"':"&quot;","'":"&#x27;"},a=/[&<>"'`]/,i=t(),o=/\\?\{([^{}]+)\}/g,f="undefined"!=typeof global?global:window,c=Object.prototype.toString;return n=e={isArray:Array.isArray||function(n){return c.call(n)},keys:Object.keys||function(n){var t,e=[];for(t in n)n.hasOwnProperty(t)&&e.push(t);return e},each:function(n,t,r){if(n){var a,i,o,f=0,c=n&&n.length,u=void 0===c||"[object Function]"===Object.prototype.toString.call(n);if(r=r||null,u)for(o=e.keys(n);f<o.length&&(a=o[f],t.call(r,n[a],a,n)!==!1);f++);else for(i=n[0];c>f&&t.call(r,i,f,n)!==!1;i=n[++f]);}return n},mix:function(n,t){for(var e in t)n[e]=t[e];return n},globalEval:function(n){f.execScript?f.execScript(n):!function(n){f.eval.call(f,n)}(n)},substitute:function(n,t,e){return"string"==typeof n&&t?n.replace(e||o,function(n,e){return"\\"===n.charAt(0)?n.slice(1):void 0===t[e]?"":t[e]}):n},escapeHtml:function(n){return n||0===n||n===!1?(n=""+n,a.test(n)?(n+"").replace(i,function(n){return r[n]}):n):""},log:function(){"undefined"!=typeof console&&console.log.apply(console,arguments)}}}(),i=function(n){function t(n){this.data=arguments.length?n:{},this.affix=e,this.root=this}var e;return t.prototype={isScope:1,setParent:function(n){this.parent=n,this.root=n.root},set:function(n,t){this.affix||(this.affix={}),this.affix[n]=t},setData:function(n){this.data=n},getData:function(){return this.data},mix:function(n){var t=this.affix;t||(t=this.affix={});for(var e in n)t[e]=n[e]},get:function(n){var t,r=this.data,a=this.affix;return t=a&&a[n],t!==e?t:(r!==e&&null!==r&&(t=r[n]),t!==e?t:"this"===n?r:"root"===n?this.root.data:t)},resolve:function(n,t){var r,a=this;if(!t&&1===n.length){if(r=a.get(n[0]),r!==e)return r;t=1}var i,o=n.length,f=a;if(o&&"root"===n[0])n.shift(),f=f.root,o--;else if(t)for(;f&&t--;)f=f.parent;if(!f)return e;if(!o)return f.data;var c=n[0];do r=f.get(c);while(r===e&&(f=f.parent));if(r&&f){for(i=1;r&&o>i;i++)r=r[n[i]];return r}return e}},n=t}(),o=function(n){function t(n){this.list=n,this.init()}function e(n,e){var r=this;r.config=e,r.head=new t(r),r.callback=n,this.init()}var r,i=a;return t.prototype={constructor:t,isBuffer:1,init:function(){this.data=""},append:function(n){this.data+=n},write:function(n,t){return(n||0===n||n===!1)&&this.append(t?i.escapeHtml(n):n),this},async:function(n){var e=this,r=e.list,a=new t(r),i=new t(r);return i.next=e.next,a.next=i,e.next=a,e.ready=!0,n(a),i},error:function(n){var t=this.list.callback;t&&(t(n,r),this.list.callback=null)},end:function(n,t){var e=this;return e.list.callback&&(e.write(n,t),e.ready=!0,e.list.flush()),e}},e.prototype={constructor:e,init:function(){this.data=""},append:function(n){this.data+=n},end:function(){this.callback(null,this.data)},flush:function(){for(var n=this,t=n.head;t;){if(!t.ready)return;this.append(t.data),t=t.next,n.head=t}n.end()}},e.Buffer=t,n=e}(),f=function(n){var t=i,e=a,r={range:function(n,t){var e=t.params,r=e[0],a=e[1],i=e[2];i?(r>a&&i>0||a>r&&0>i)&&(i=-i):i=r>a?-1:1;for(var o=[],f=r;a>r?a>f:f>a;f+=i)o.push(f);return o},each:function(n,r,a){var i,o,f,c=r.params,u=c[0],s=c[2]||"xindex",l=c[1];if(u)if(e.isArray(u)){i=u.length;for(var h=0;i>h;h++)o=new t(u[h]),f=o.affix={xcount:i},f[s]=h,l&&(f[l]=u[h]),o.setParent(n),a=r.fn(o,a)}else for(var m in u)o=new t(u[m]),f=o.affix={},f[s]=m,l&&(f[l]=u[m]),o.setParent(n),a=r.fn(o,a);return a},"with":function(n,e,r){var a=e.params,i=a[0];if(i){var o=new t(i);o.setParent(n),r=e.fn(o,r)}return r},"if":function(n,t,e){var r=t.params,a=r[0];if(a){var i=t.fn;i&&(e=i(n,e))}else{var o=!1,f=t.elseIfs,c=t.inverse;if(f)for(var u=0,s=f.length;s>u;u++){var l=f[u];if(o=l.test(n)){e=l.fn(n,e);break}}!o&&c&&(e=c(n,e))}return e},set:function(n,t,e){return n.mix(t.hash),e},include:function(n,e,r){var a,i,o=e.params,f=o.length;for(i=n,e.hash&&(i=new t(e.hash),i.setParent(n)),a=0;f>a;a++)r=this.root.include(o[a],this,i,e,r);return r},parse:function(n,e,a){return r.include.call(this,new t,e,a)},extend:function(n,t,e){return this.runtime.extendTplName=t.params[0],e},block:function(n,t,e){var r,a=this,i=a.runtime,o=t.params,f=o[0];2===o.length&&(r=o[0],f=o[1]);var c,u=i.blocks=i.blocks||{},s=u[f],l={fn:t.fn,type:r};if(s){if(s.type)if("append"===s.type)l.next=s,u[f]=l;else if("prepend"===s.type){var h;for(c=s;c&&"prepend"===c.type;)h=c,c=c.next;l.next=c,h.next=l}}else u[f]=l;if(!i.extendTplName)for(c=u[f];c;)c.fn&&(e=c.fn.call(a,n,e)),c=c.next;return e},macro:function(n,e,r,a){var i=e.hash,o=e.params,f=o[0],c=o.slice(1),u=this,s=u.runtime,l=s.macros=s.macros||{};if(e.fn)l[f]={paramNames:c,hash:i,fn:e.fn};else{var h,m=l[f],d=m.hash||{};if(!m||!(h=m.paramNames)){var p="in file: "+u.name+" can not find macro: "+name+'" at line '+a;throw new Error(p)}for(var v=0,g=h.length;g>v;v++){var x=h[v];d[x]=c[v]}if(i)for(var y in i)d[y]=i[y];var w=new t(d);r=m.fn.call(u,w,r)}return r}};return r["debugger"]=function(){e.globalEval("debugger")},n=r}(),c=function(n){function e(n,t,e){var r=e[0],a=n&&n[r]||t&&t[r]||m[r];if(1===e.length)return a;if(a)for(var i=e.length,o=1;i>o&&(a=a[e[o]],a);o++);return a}function r(n,t){var e=n.split("/"),r=t.split("/");e.pop();for(var a=0,i=r.length;i>a;a++){var o=r[a];"."===o||(".."===o?e.pop():e.push(o))}return e.join("/")}function c(n,t,e){e=n.fn(t,e);var r=n.runtime.extendTplName;return r&&(delete n.runtime.extendTplName,e=n.root.include(r,n,t,null,e)),e.end()}function u(n,t,r,a,i,o,f,c){var u,s,l,h;if(o||(h=e(n.runtime.commands,n.root.config.commands,i)),h)return h.call(n,t,r,a,f);if(u="in file: "+n.name+" can not call: "+i.join(".")+'" at line '+f,c&&(s=t.resolve(i.slice(0,-1),o),l=s[i[i.length-1]]))return l.apply(s,r.params);if(u)throw new Error(u);return a}function s(n,t){var e=this;e.fn=n,t=e.config=t||{},t.loader=t.loader||s.loader,this.subNameResolveCache={}}var l=a,h=f,m={},d=i,p=o,v={callFn:function(n,t,e,r,a,i,o){return u(n,t,e,r,a,i,o,!0)},callCommand:function(n,t,e,r,a,i){return u(n,t,e,r,a,0,i,!0)}},g={cache:{},load:function(n,e){var r=n.name,a=this.cache;return a[r]?e(void 0,a[r]):void t([r],{success:function(n){a[r]=n,e(void 0,n)},error:function(){var t='template "'+n.name+'" does not exist';l.log(t,"error"),e(t)}})}};return l.mix(s,{loader:g,nativeCommands:h,utils:v,util:l,addCommand:function(n,t){m[n]=t},removeCommand:function(n){delete m[n]}}),s.prototype={constructor:s,Scope:d,nativeCommands:h,utils:v,removeCommand:function(n){var t=this.config;t.commands&&delete t.commands[n]},addCommand:function(n,t){var e=this.config;e.commands=e.commands||{},e.commands[n]=t},resolve:function(n,t){if("."!==n.charAt(0))return n;if(!t){var e="parent template does not have name for relative sub tpl name: "+n;throw new Error(e)}var a=this.subNameResolveCache[t]=this.subNameResolveCache[t]||{};return a[n]?a[n]:n=a[n]=r(t,n)},include:function(n,t,e,r,a){var i=this,o=t.name,f=i.resolve(n,o);return a.async(function(a){i.config.loader.load({root:i,parentName:o,originalName:n,name:f,scope:e,option:r},function(n,i){n?a.error(n):"string"==typeof i?a.write(i,r&&r.escape).end():c({root:t.root,fn:i,name:f,runtime:t.runtime},e,a)})})},render:function(n,t,e){var r="",a=this,i=a.fn;"function"==typeof t&&(e=t,t=null),t=t||{},e=e||function(n,t){if(n)throw n instanceof Error||(n=new Error(n)),n;r=t};var o=a.config.name;!o&&i.TPL_NAME&&(o=i.TPL_NAME);var f=new d(n),u=new s.LinkedBuffer(e,a.config).head;return c({name:o,fn:i,runtime:{commands:t.commands},root:a},f,u),r}},s.Scope=d,s.LinkedBuffer=p,n=s}(),r.exports=c});