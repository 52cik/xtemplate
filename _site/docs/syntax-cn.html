<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>xtemplate - XTemplate 模板语法</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="nico 0.5.1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link type="image/x-icon" href="/favicon.ico" rel="icon">
    <link rel="stylesheet" href="../static/css/normalize.css" />
    <link rel="stylesheet" href="../static/css/site.css" />
    <link rel="stylesheet" href="../static/css/solarized.css" />
<script>
if (!location.port) {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-50522089-2', 'auto');
  ga('send', 'pageview');
}
</script>
<script src="../static/js/sea.js?nowrap"></script>

<script>
  seajs.config({
    base: "../",
    alias: {}
  });
</script>
    <!--[if lt IE 9]>
    <script src="../static/js/html5shiv.js"></script>
    <![endif]-->
  </head>
  <body class="spmjs">
    <div class="body-wrapper">
      <aside class="sidebar-wrapper">
      <h1>
          <a href="../">Xtemplate</a>
      </h1>
      <p class="sidebar-version">Version: <a href="http://spmjs.io/package/xtemplate" title="">4.0.3</a></p>
        <p class="sidebar-description" data-keyword="template"></p>
        <a class="sidebar-source" href="http://github.com/kissyteam/xtemplate" target="_blank">View the Project</a>
        <ul class="sidebar-navigation" role="navigation">
          <li><a href="../">Doc</a></li>
          <li><a class="test-link" href="../tests/runner.html" target="_blank">Test</a></li>
          <li><a class="issue-link" href="http://github.com/kissyteam/xtemplate/issues" target="_blank">Issues</a></li>
        </ul>
        
<ol class="sidenav">
  <li><a href="../">xtemplate</a></li>
  <li><a href="api.html">XTemplate API</a></li>
  <li><a href="syntax-cn.html">XTemplate 模板语法</a></li>
  <li><a href="syntax.html">XTemplate Syntax</a></li>
</ol>

        <div class="qrcode-wrapper">
          <i class="icon iconfont">
            &#x3433;
            <div class="qrcode" id="qrcode"></div>
          </i>
        </div>
      </aside>
      <div class="content-wrapper">
        
<article class="hentry">
  <h1 class="entry-title">XTemplate 模板语法</h1>
  <div class="entry-content">
    <p>本文档是 XTemplate 支持的语法功能的一个整体简介。</p>
<h2 id="变量">变量<a href="#变量" class="anchor">¶</a></h2><p>变量会从当前模板的上下文上查找值，如果你想输出一个变量的值，可以使用：</p>
<pre>{{ username }}</pre><p>这样模板引擎将会从上下文上去查找变量 <code>name</code> 然后打印出来。变量可以使用 <code>.</code> 来访问属性，和 javascript 一样，也可以用 <code>[]</code>。</p>
<pre>{{ user.name }}
{{ user[&quot;name&quot;] }}</pre><p>和 javascript 一样，这两种方式的结果都是一样的。</p>
<p>如果一个变量的值是 <code>undefined</code> 或者 <code>null</code>，什么也不会被输出。同样的，如果引用了 <code>undefined</code> 或者 <code>null</code> 的属性，也不会输出任何值（也不会报错）。下面的这些操作当 <code>foo === undefined</code> 的时候，都不会输出任何值：<code>{{ foo }}</code>, <code>{{ foo.bar }}</code>, <code>{{ foo.bar.baz }}</code>。</p>
<h3 id="支持的数据类型">支持的数据类型<a href="#支持的数据类型" class="anchor">¶</a></h3><p>XTemplate 支持 javascript 中所有的基本数据类型。</p>
<ul>
<li><code>Boolean</code></li>
<li><code>Number</code></li>
<li><code>String</code></li>
<li><code>null</code></li>
<li><code>undefined</code></li>
<li><code>Object</code></li>
<li><code>Array</code></li>
</ul>
<h3 id="输出">输出<a href="#输出" class="anchor">¶</a></h3><p>使用 <code>{{ foo }}</code> 来输出 <code>escape</code> 之后的数据, <code>{{{ foo }}}</code> 来输出 <code>unescape</code> 的原始数据。</p>
<div class="highlight"><pre><code class="xml">escaped: {{ foo }}
unescaped: {{{ foo }}}</code></pre></div><p>使用数据 <code>{ foo: &quot;&lt;script&gt;&quot; }</code> 渲染这个模板，将会得到下面的结果：</p>
<div class="highlight"><pre><code class="xml">escaped: &amp;lt;script&amp;gt;
unescaped: <span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript"></span></code></pre></div><p>如果你希望输出最原始的数据（包括 <code>{{}}</code>），你需要使用 <code>{{% %}}</code> 语法：</p>
<pre>{{%

{{x}}

%}}</pre><p>渲染这个模板，将会得到下面的结果：</p>
<pre>{{x}}</pre><p>如果想要给模板增加一些注释，请使用 <code>{{! comment }}</code>：</p>
<pre>{{! This is commnet }}</pre><p>渲染这个模板，将会得到下面的结果：</p>
<h3 id="作用域">作用域<a href="#作用域" class="anchor">¶</a></h3><p>每一个模板都有一个独立的作用域，在子模板中可以访问到父模板的上下文，但是在子模板中定义或者修改变量不会影响到父模板的变量。就像 javascript 中一样。</p>
<p>parent.xtpl:</p>
<pre>{{ set (a = 1, b = 2) }}
{{include (&quot;sub.xtpl&quot;) }}
in parent:
a = {{ a }}
b = {{ b }}</pre><p>sub.xtpl:</p>
<pre>in sub:
{{ set b = 3 }}
a = {{ a }}
b = {{ b }}</pre><p>渲染 <code>parent.xtpl</code>，将会得到下面的结果：</p>
<pre>in sub:
a: 1
b: 3
in parent:
a: 1
b: 2</pre><h3 id="根数据">根数据<a href="#根数据" class="anchor">¶</a></h3><p>通过 <code>root.foo</code> 可以放问到渲染的根数据（调用 <code>render</code> 方法时传递进去的数据）。</p>
<p>用数据 <code>{name: &quot;foo&quot;, array: [name: &quot;bar&quot;]}</code> 渲染下面的模板:</p>
<pre>{{#each(arr)}}
{{root.name}} {{name}}
{{/each}}</pre><p>将会得到结果：</p>
<pre>foo bar</pre><h2 id="方法和逻辑">方法和逻辑<a href="#方法和逻辑" class="anchor">¶</a></h2><p>你可以使用变量上 javascript 提供的方法：</p>
<div class="highlight"><pre><code class="javascript"><span class="keyword">var</span> x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</code></pre></div><pre>{{#each(x.slice(1))}}{{this}} {{/each}} // =&gt; 2 3</pre><h3 id="操作符">操作符<a href="#操作符" class="anchor">¶</a></h3><p>XTemplate 支持在数据上使用一些操作符：</p>
<ul>
<li>加: <code>+</code></li>
<li>减: <code>-</code></li>
<li>乘: <code>*</code></li>
<li>除: <code>/</code></li>
<li>余: <code>%</code></li>
</ul>
<p>例子:</p>
<pre>{{x+y}}
{{x + &quot;1&quot;}}
{{ y - 1 }}</pre><h3 id="比较">比较<a href="#比较" class="anchor">¶</a></h3><ul>
<li><code>===</code></li>
<li><code>!==</code></li>
<li><code>&gt;</code></li>
<li><code>&gt;=</code></li>
<li><code>&lt;</code></li>
<li><code>&lt;=</code></li>
</ul>
<p>例子:</p>
<pre>{{#if( x===1 )}}
1
{{elseif (x===2)}}
2
{{else}}
3
{{/if}}

{{#if ( (x+1) &gt; 2 )}}
{{/if}}</pre><h3 id="逻辑操作">逻辑操作<a href="#逻辑操作" class="anchor">¶</a></h3><ul>
<li><code>||</code></li>
<li><code>&amp;&amp;</code></li>
<li><code>!</code></li>
</ul>
<p>例子:</p>
<pre>{{#if(x&gt;1 && y&lt;2)}}
{{/if}}

{{#if(!x)}}
{{/if}}</pre><h3 id="函数调用">函数调用<a href="#函数调用" class="anchor">¶</a></h3><p>如果你传递了 javascript 的方法到模板中，你可以像在 javascript 中一样使用它.</p>
<p>{{ foo(1, 2, 3) }}</p>
<h3 id="内置函数">内置函数<a href="#内置函数" class="anchor">¶</a></h3><h4 id="range-start-end-step">range(start, end, [step])<a href="#range-start-end-step" class="anchor">¶</a></h4><p>如果需要迭代一些固定的数字，<code>range</code> 可以很方便的生成一个数字集合给你。这些数字从 <code>start</code> 开始，然后按照 <code>step</code> (默认为1) 的数量进行递增或者递减，直到数字到达了 <code>stop</code>（不会包括 <code>stop</code>）。</p>
<pre>{{#each(range(0,3))}}{{this}}{{/each}}
{{#each(range(3,0))}}{{this}}{{/each}}
{{#each(range(3,0,2))}}{{this}}{{/each}}</pre><p>渲染这个模板，将会得到结果：</p>
<pre>012
321
31</pre><h4 id="set-key-value-key-value">set(key=value, [key=value])<a href="#set-key-value-key-value" class="anchor">¶</a></h4><p><code>set</code> 让你定义或者修改一个变量。</p>
<pre>{{set(x=1)}}
{{set(y=3,z=2)}}
{{x}}
{{y+z}}</pre><p>渲染这个模板，将会得到结果：</p>
<pre>1
5</pre><h2 id="命令">命令<a href="#命令" class="anchor">¶</a></h2><p>命令是一些特殊的区块，对于这些特殊的区块，XTemplate 会做特殊的处理。XTemplate 自带了一些内置的命令，你也可以自己定义一些自己的命令。</p>
<h3 id="if">if<a href="#if" class="anchor">¶</a></h3><p><code>if</code> 检查一个条件，让你可以选择性的输出内容，它和 javascript 中的 <code>if</code> 完全一致。</p>
<pre>{{# if (variable) }}
    It is true
{{/ if }}</pre><p>如果 <code>variable</code> 定义了且值为 true, 将会输出 <code>It is true</code>，否则什么都不会输出。</p>
<p>同样，可以通过 <code>elseif</code> 和 <code>else</code> 增加判断中的其他条件：</p>
<pre>{{# if (hungry) }}
    I am hungry
{{ elseif (tired) }}
    I am tired
{{ else }}
    I am good!
{{/ if }}</pre><h3 id="with">with<a href="#with" class="anchor">¶</a></h3><p><code>with</code> 命令和 javascript 中的 <code>with</code> 类似：</p>
<div class="highlight"><pre><code class="javascript"><span class="keyword">var</span> a = {
    b: <span class="number">1</span>
}</code></pre></div><pre>{{#with(a)}}
{{b}} // 1
{{/with}}</pre><h3 id="each">each<a href="#each" class="anchor">¶</a></h3><p><code>each</code> 可以对 arrays 和 dictionaries 进行迭代：</p>
<pre>{{#each(x)}}
    {{xindex}} {{this}}
{{/each}}

{{#each(y,&quot;value&quot;,&quot;key&quot;)}}
    {{key}} {{value}}
{{/each}}</pre><p>使用数据 <code>{x: [1, 2, 3], y: {a: 1, b: 2, c: 3}}</code> 渲染上面的页面，将会得到结果：</p>
<pre>0 1
1 2
2 3

a 1
b 2
c 3</pre><h4 id="访问上层变量">访问上层变量<a href="#访问上层变量" class="anchor">¶</a></h4><p>在 <code>with</code> 和 <code>each</code> 中，可以通过 <code>../</code> 来访问外层的同名变量.</p>
<pre>{{#with(x)}}
    {{#each(b)}}
        {{../a}}{{a}} // 12
    {{/each}}
{{/with}}</pre><p>使用数据 <code>{a: 1, b: [{a: 2}] }</code> 渲染上面的页面，将会得到结果：</p>
<pre>12</pre><h3 id="宏">宏<a href="#宏" class="anchor">¶</a></h3><p>宏允许你定义一个可复用的代码片段，和 javascript 中的函数有点类似，下面是一个例子：</p>
<pre>{{#macro(&quot;test&quot;,&quot;param&quot;, default=1)}}
    param is {{param}} {{default}}
{{/macro}}</pre><p>Now you can call this macro like:</p>
<pre>{{macro(&quot;test&quot;,&quot;2&quot;)}}
{{macro(&quot;test&quot;, &quot;2&quot;, default=2)}}</pre><p>渲染结果是：</p>
<pre>param is 2 1
param is 2 2</pre><p>注意: 在宏中，你不能访问外层作用域上的任何变量，但是仍然可以通过 <code>root</code> 来访问根数据。</p>
<h3 id="include">include<a href="#include" class="anchor">¶</a></h3><p>include 引入其他的模板。它在你想要共享不同的小的区块时非常有用。</p>
<pre>{{ include (&quot;item.html&quot;) }}</pre><h2 id="模板继承">模板继承<a href="#模板继承" class="anchor">¶</a></h2><p>模板继承可以让你更容易的来复用模板。当编写一个 template 的时候，你可以定义 <code>blocks</code>，这样在子模板中可以重写掉这些 block。</p>
<p>如果有一个模板 <code>parent.xtpl</code>：</p>
<div class="highlight"><pre><code class="xml"><span class="doctype">&lt;!doctype html&gt;</span>
<span class="tag">&lt;<span class="title">html</span>&gt;</span>
    <span class="tag">&lt;<span class="title">head</span>&gt;</span>
        <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">name</span>=<span class="value">"charset"</span> <span class="attribute">content</span>=<span class="value">"utf-8"</span> /&gt;</span>
        <span class="tag">&lt;<span class="title">title</span>&gt;</span>{{title}}<span class="tag">&lt;/<span class="title">title</span>&gt;</span>
        {{{block ("head")}}}
    <span class="tag">&lt;/<span class="title">head</span>&gt;</span>
    <span class="tag">&lt;<span class="title">body</span>&gt;</span>
        {{{block ("body")}}}
    <span class="tag">&lt;/<span class="title">body</span>&gt;</span>
<span class="tag">&lt;/<span class="title">html</span>&gt;</span></code></pre></div><p>和一个子模板 <code>child.xtpl</code>:</p>
<div class="highlight"><pre><code class="xml">{{extend ("./parent")}}

{{#block ("head")}}
    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">type</span>=<span class="value">"text/css"</span> <span class="attribute">href</span>=<span class="value">"test.css"</span> <span class="attribute">rev</span>=<span class="value">"stylesheet"</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span>/&gt;</span>
{{/block}}

{{#block ("body")}}
    <span class="tag">&lt;<span class="title">h2</span>&gt;</span>{{title}}<span class="tag">&lt;/<span class="title">h2</span>&gt;</span>
{{/block}}</code></pre></div><pre>
然后我们使用数据 `{title: &#39;XTemplate&#39;}` 渲染 `child.xtpl`，将会得到下面的结果：

```html
&lt;!doctype html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta name=&quot;charset&quot; content=&quot;utf-8&quot; /&gt;
        &lt;title&gt;XTemplate&lt;/title&gt;
        &lt;link type=&quot;text/css&quot; href=&quot;test.css&quot; rev=&quot;stylesheet&quot; rel=&quot;stylesheet&quot;/&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h2&gt;XTemplate&lt;/h2&gt;
    &lt;/body&gt;
&lt;/html&gt;</pre><h2 id="保留关键词">保留关键词<a href="#保留关键词" class="anchor">¶</a></h2><ul>
<li><code>debugger</code></li>
<li><code>each</code></li>
<li><code>extend</code></li>
<li><code>include</code></li>
<li><code>macro</code></li>
<li><code>parse</code></li>
<li><code>range</code></li>
<li><code>set</code></li>
<li><code>with</code></li>
</ul>

  </div>
</article>

      </div>
      
    </div>
    <div class="footer-wrapper">
      <footer>
        <p class="footer-powered"><a href="http://spmjs.io">spmjs.io</a> •
<a href="https://github.com/spmjs/spm">spm</a> •
<a href="http://seajs.org">Sea.js</a> •
<a href="http://lab.lepture.com/nico/">nico</a>
        </p>
      </footer>
    </div>
  </body>
  <script src="../static/js/nprogress.js?nowrap"></script>
  <script>
  (function() {
    NProgress.start();
    window.onload = NProgress.done;
    var ready = function(fn) {
      var doc = document;
      if(doc.addEventListener) {
        doc.addEventListener('DOMContentLoaded', fn, false);
      } else {
        doc.attachEvent('onreadystatechange', fn);
      }
    };
    ready(function() {
      NProgress.inc(0.6);

      seajs.use("../static/js/arale-qrcode.js?nowrap", function(QRCode) {
        var url = location.href;
        if (location.hostname === 'localhost' || location.hostname === '127.0.0.1') {
          url = url.replace(location.hostname, '192.168.1.15');
        }
        var el = new QRCode({
          text: url,
          render: 'canvas',
          width: 120,
          height: 120
        });
        document.getElementById('qrcode').appendChild(el);
      });
    }, false);
  })();
  </script>
</html>